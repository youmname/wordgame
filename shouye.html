<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å•è¯è¿è¿çœ‹ - ä¸»å¤§å…</title>
    
    <!-- å¼•å…¥å¤–éƒ¨CSSæ–‡ä»¶ -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/themes.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/shouye.css">
    <link rel="stylesheet" href="css/heatmap-calendar.css"> 
    

    <!-- å¼•å…¥å­—ä½“å›¾æ ‡åº“ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- å¼•å…¥GSAPåŠ¨ç”»åº“ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"></script>
    
    <!-- é¢„åŠ è½½éŸ³æ•ˆèµ„æº -->
    <link rel="preload" href="assets/sounds/click.mp3" as="audio">
    <link rel="preload" href="assets/sounds/success.mp3" as="audio">
    <link rel="preload" href="assets/sounds/fail.mp3" as="audio">
    <link rel="preload" href="assets/sounds/level_complete.mp3" as="audio">
    <link rel="preload" href="assets/sounds/badge_unlock.mp3" as="audio">
    <style>
        /* æ–°å¢æ ·å¼è¡¨ */
        #mode-selection-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(8px);
            z-index: 1000;
            font-family: 'PingFang SC', 'Quicksand', sans-serif;
        }
        
        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80vw;
            max-width: 900px;
            min-height: 60vh;
            background: rgba(250, 243, 224, 0.9);
            border-radius: 32px;
            padding: 40px;
            box-shadow: 0 16px 40px rgba(176, 196, 222, 0.2);
            border: 1px solid rgba(211, 183, 166, 0.2);
        }
        
        .mode-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            margin: 40px 0;
        }
        
        .mode-card {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 24px;
            padding: 30px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
            position: relative;
            overflow: hidden;
        }
        
        .mode-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, 
                rgba(199, 232, 213, 0.1) 0%, 
                rgba(255, 183, 197, 0.05) 100%);
            transform: rotate(45deg);
        }
        
        .mode-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 32px rgba(176, 196, 222, 0.3);
        }
        
        .mode-icon {
            font-size: 48px;
            margin-bottom: 20px;
            filter: drop-shadow(2px 2px 4px rgba(0,0,0,0.1));
        }
        
        .mode-title {
            color: #4A4A4A;
            font-size: 24px;
            margin-bottom: 12px;
            font-weight: 600;
        }
        
        .mode-desc {
            color: #7A7A7A;
            font-size: 15px;
            line-height: 1.5;
        }
        
        /* åŠ¨æ€è£…é¥°å…ƒç´  */
        .deco-line {
            position: absolute;
            background: rgba(216, 166, 179, 0.3);
            transform-origin: left;
            animation: drawLine 1.2s ease-out;
        }
        
        @keyframes drawLine {
            0% { transform: scaleX(0); }
            100% { transform: scaleX(1); }
        }
    </style>
    
    <!-- å…¨å±€å‡½æ•°å®šä¹‰ -->
    <script>
        // ä¸´æ—¶å®šä¹‰è¿™äº›å‡½æ•°ï¼Œç¡®ä¿é¡µé¢åŠ è½½æ—¶ä¸ä¼šæŠ¥é”™
        function toggleTheme(theme) {
            // å†…è”è„šæœ¬ä»…ä½œä¸ºä¸´æ—¶è§£å†³æ–¹æ¡ˆï¼Œå®é™…åŠŸèƒ½ç”±theme.jsæ¨¡å—æä¾›
            console.log('åˆ‡æ¢ä¸»é¢˜:', theme);
            document.documentElement.setAttribute('data-theme', theme);
            
            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            document.querySelectorAll('.theme-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`.theme-btn.${theme}`).classList.add('active');
        }
        
        function showCustomWordbank() {
            console.log('æ˜¾ç¤ºè‡ªå®šä¹‰è¯åº“');
            alert('è‡ªå®šä¹‰è¯åº“åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­...');
        }
        
        function startTodayChallenge() {
            console.log('å¼€å§‹ä»Šæ—¥æŒ‘æˆ˜');
            alert('ä»Šæ—¥æŒ‘æˆ˜åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­...');
        }
        
        function showSettings() {
            console.log('æ˜¾ç¤ºè®¾ç½®');
            alert('è®¾ç½®åŠŸèƒ½æ­£åœ¨å¼€å‘ä¸­...');
        }
    </script>
</head>
<body>
    <div class="main-wrapper">
        <!-- å·¦ä¾§å¯¼èˆªåŒº å›ºå®šå®½åº¦ -->
        <nav class="side-nav">
            <div class="vertical-nav">
                <div class="nav-section">
                    <h3>å­¦ä¹ ç©ºé—´</h3>
                    <button class="nav-btn active" data-action="openWordLibrary">ğŸ“š æˆ‘çš„è¯åº“</button>
                    <button class="nav-btn" data-action="showCalendar">ğŸ—“ï¸ å­¦ä¹ æ—¥å†</button>
                    <button class="nav-btn" data-action="showBadges">ğŸ† æˆå°±å¢™</button>
                </div>
                <div class="nav-section">
                    <h3>æŒ‘æˆ˜æ¨¡å¼</h3>
                    <button class="nav-btn" data-action="lianxianMode">âš¡ è¿çº¿æ¨¡å¼</button>
                    <button class="nav-btn" data-action="pipeiMode">ğŸ§© åŒ¹é…æ¨¡å¼</button>
                    <button class="nav-btn" data-action="jiyiMode">ğŸ® è®°å¿†æ¨¡å¼</button>
                </div>
            </div>
            <div class="user-profile">
                <div class="theme-switch">
                    <button class="theme-btn feminine active" onclick="toggleTheme('feminine')">ğŸŒ¸</button>
                    <button class="theme-btn masculine" onclick="toggleTheme('masculine')">ğŸŒ€</button>
                </div>
                <div class="user-avatar">
                    <img src="assets/images/default-avatar.png" alt="ç”¨æˆ·å¤´åƒ" id="user-avatar">
                    <!-- <div class="level-badge">Lv.12</div> -->
                </div>
                <div class="user-info">
                    
                    <h2 id="user-name">ğŸ‘‘ å­¦ä¹ è¾¾äºº</h2>
                    <div class="user-stats">
                        <div class="time-bubble">â° <span id="user-minutes">1200</span>åˆ†é’Ÿ</div>
                        <div class="score-bubble">âœ¨ <span id="user-score">1280</span>ç§¯åˆ†</div>
                    </div>
                </div>
            </div>
        </nav>

        <!-- ä¸­å¤®å†…å®¹åŒº è‡ªé€‚åº”å®½åº¦ -->
        <main class="content-area">
            <div class="grid-header">
                <h2>ğŸ“– å•è¯å­¦ä¹ çŸ©é˜µ</h2>
                <div class="view-controls">
                    <button class="view-btn active" data-view="grid">å®«æ ¼è§†å›¾</button>
                    <button class="view-btn" data-view="list">åˆ—è¡¨è§†å›¾</button>
                    <button class="view-btn" data-view="timeline">æ—¶é—´çº¿</button>
                </div>
            </div>
            
            <div class="features-grid">
                <div class="func-card" data-type="primary" onclick="window.location.href='level.html'">
                    ğŸš€ å¼€å§‹é—¯å…³  
                    <div class="sticker">Level 3</div>
                    <img src="assets/decorations/paper-clip.png" class="deco-clip">
                </div>
                
                <div class="func-card" data-type="secondary" onclick="startRandomChallenge()">
                    ğŸ² éšæœºæŒ‘æˆ˜  
                    <div class="sticker">Hot!</div>
                </div>
                
                <div class="func-card" data-type="secondary" onclick="window.location.href='diy.html'">
                    ğŸ“š å¯¼å…¥å•è¯  
                    <img src="assets/decorations/paper-clip-blue.png" class="deco-clip">
                </div>
                
                <div class="func-card" data-type="secondary" onclick="startTodayChallenge()">
                    ğŸŒŸ ä»Šæ—¥æ¨è
                    <div class="sparkle-effect"></div>
                </div>
            </div>

            <!-- <div class="category-section">
                <div class="category-title">
                    <img src="assets/decorations/highlight.png" class="highlight">
                    <h3>è¯æ±‡åˆ†ç±»</h3>
                </div>
                <div class="category-buttons">
                    <button class="category-btn active" data-category="æ‰€æœ‰" data-level-id="1">æ‰€æœ‰è¯æ±‡</button>
                    <button class="category-btn" data-category="è€ƒç ”" data-level-id="2">è€ƒç ”è¯æ±‡</button>
                    <button class="category-btn" data-category="é«˜è€ƒ" data-level-id="3">é«˜è€ƒè¯æ±‡</button>
                    <button class="category-btn" data-category="é›…æ€" data-level-id="4">é›…æ€è¯æ±‡</button>
                    <button class="category-btn" data-category="åˆä¸­" data-level-id="5">åˆä¸­è¯æ±‡</button>
                    <button class="category-btn" data-category="å…­çº§" data-level-id="6">å…­çº§è¯æ±‡</button>
                </div>
            </div> -->
            
            <div class="stats-container">
                <div class="data-module">
                    <div class="data-label">è¿ç»­å­¦ä¹ </div>
                    <div class="data-value">7å¤© <span class="fire">ğŸ”¥</span></div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="streak-progress"></div>
                    </div>
                    <div class="badge-tip">å†åšæŒ3å¤©å¯è·å¾—"å­¦ä¹ è¾¾äºº"å‹‹ç« </div>
                </div>
                
                <div class="data-module">
                    <div class="data-label">å·²æŒæ¡å•è¯</div>
                    <div class="data-value">364 <span class="mastery-count">/ 1000</span></div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="mastery-progress"></div>
                    </div>
                </div>
            </div>
        </main>

        <!-- å³ä¾§é¢æ¿åŒº å›ºå®šå®½åº¦ -->
        <aside class="right-panel">
            <div class="achievement-panel">
            <div class="panel-section">
                <h4>ğŸ† æˆå°±å¾½ç« </h4>
                <div class="badge-wall">
                  <!-- å·²è§£é”å¾½ç«  -->
                  <div class="badge unlocked" title="é¦–æ¬¡æŒ‘æˆ˜">ğŸ¥‰</div>
                  <div class="badge unlocked" title="è¿ç»­å­¦ä¹ 3å¤©">â±ï¸</div>
                  <div class="badge unlocked" title="æŒæ¡100ä¸ªå•è¯">ğŸ“š</div>
                  <div class="badge unlocked" title="é€Ÿåº¦ä¹‹æ˜Ÿ">âš¡</div>
                  <div class="badge unlocked" title="å®Œç¾è®°å¿†">ğŸ§ </div>
                  
                  <!-- æ–°å¢å¾½ç«  -->
                  <div class="badge unlocked" title="å•è¯çŒäºº">ğŸ¯</div>
                  <div class="badge unlocked" title="æ—©èµ·å­¦ä¹ è€…">ğŸŒ…</div>
                  <div class="badge unlocked" title="å¤œé—´å­¦ä¹ è€…">ğŸŒ™</div>
                  <div class="badge unlocked" title="å‘¨æœ«å­¦éœ¸">ğŸ“Š</div>
                  <div class="badge unlocked" title="è¯æ±‡å¤§å¸ˆåˆçº§">ğŸ“</div>
                  
                  <!-- éƒ¨åˆ†è§£é”å¾½ç«  -->
                  <div class="badge unlocked" title="è¿èƒœ10åœº">ğŸ†</div>
                  <div class="badge unlocked" title="å…¨å‹¤ä¸€å‘¨">ğŸ“…</div>
                  
                  <!-- æœªè§£é”å¾½ç«  -->
                  <div class="badge locked" title="å…¨å‹¤ä¸€æœˆ(æœªè§£é”)">ğŸ”’</div>
                  <div class="badge locked" title="è¯æ±‡å¤§å¸ˆä¸­çº§(æœªè§£é”)">ğŸ”’</div>
                  <div class="badge locked" title="è¯æ±‡å¤§å¸ˆé«˜çº§(æœªè§£é”)">ğŸ”’</div>
                  <div class="badge locked" title="æé€Ÿæ¨¡å¼å¤§å¸ˆ(æœªè§£é”)">ğŸ”’</div>
                  <div class="badge locked" title="æ‹¼å›¾æ¨¡å¼å¤§å¸ˆ(æœªè§£é”)">ğŸ”’</div>
                  <div class="badge locked" title="ç”Ÿå­˜æ¨¡å¼å¤§å¸ˆ(æœªè§£é”)">ğŸ”’</div>
                  <div class="badge locked" title="å­¦ä¹ ä¼ å¥‡(æœªè§£é”)">ğŸ”’</div>
                  <div class="badge locked" title="ç»ˆææˆå°±(æœªè§£é”)">ğŸ”’</div>
                </div>
            </div>
            
            <div class="panel-section">
                <h4>ğŸ“… å­¦ä¹ æ—¥å†</h4>
                <div class="calendar-container" id="calendar-container" style="overflow: visible !important; min-height: 350px !important; position: relative !important; max-height: none !important; display: block !important;">
                    <!-- æ—¥å†å°†ç”±HeatmapCalendarç»„ä»¶åŠ¨æ€ç”Ÿæˆ -->
                    <div id="calendar-debug" style="display: none; color: red; font-size: 10px;"></div>
                </div>
            </div>
            </div>
        </aside>
    </div>
    
    <!-- ç§»åŠ¨ç«¯èœå•å¼€å…³ -->
    <div class="mobile-nav-toggle">
        <i class="fas fa-bars"></i>
    </div>
    
    <!-- å³ä¾§é¢æ¿åˆ‡æ¢æŒ‰é’® -->
    <div class="panel-toggle">
        <i class="fas fa-medal"></i>
    </div>
    
    <!-- è®¾ç½®èœå• -->
    <div class="settings-button" onclick="showSettings()">
        <i class="fas fa-cog"></i>
    </div>

    <!-- æ¸¸æˆæ¨¡å¼é€‰æ‹©æ¨¡æ€æ¡† - æ¨ªå‘æ’åˆ— -->
    <div id="mode-selection-modal">
        <div class="modal-content">
            <!-- è£…é¥°çº¿æ¡ -->
            <div class="deco-line" style="top:15%; left:5%; width:120px; height:2px;"></div>
            <div class="deco-line" style="bottom:20%; right:5%; width:80px; height:2px;"></div>
            
            <h3 style="text-align:center; color:#4A4A4A; font-size:32px; margin-bottom:40px;">
                âœ¨ é€‰æ‹©å­¦ä¹ æ¨¡å¼
            </h3>
    
            <div class="mode-grid">
                <!-- è¿çº¿æ¨¡å¼ -->
                <div class="mode-card" data-mode="lianxianMode">
                    <div class="mode-icon">ğŸŒ¿</div>
                    <div class="mode-title">è‡ªç„¶è¿çº¿</div>
                    <div class="mode-desc">
                        é€šè¿‡è§†è§‰è”æƒ³å»ºç«‹å•è¯é—´çš„è®°å¿†çº½å¸¦<br>
                        <span style="color:#D8A6B3;">æ¨èç»™è§†è§‰å­¦ä¹ è€…</span>
                    </div>
                </div>
    
                <!-- åŒ¹é…æ¨¡å¼ -->
                <div class="mode-card" data-mode="pipeiMode">
                    <div class="mode-icon">ğŸƒ</div>
                    <div class="mode-title">å¶ç‰‡åŒ¹é…</div>
                    <div class="mode-desc">
                        ç¿»è½¬å¶ç‰‡å¯»æ‰¾éšè—çš„å•è¯ä¼™ä¼´<br>
                        <span style="color:#8E7CC3;">é€‚åˆç¢ç‰‡æ—¶é—´ç»ƒä¹ </span>
                    </div>
                </div>
    
                <!-- è®°å¿†æ¨¡å¼ -->
                <div class="mode-card" data-mode="jiyiMode">
                    <div class="mode-icon">ğŸŒ¸</div>
                    <div class="mode-title">è®°å¿†èŠ±å›­</div>
                    <div class="mode-desc">
                        åœ¨é™å®šæ—¶é—´åŸ¹è‚²ä½ çš„å•è¯èŠ±å›­<br>
                        <span style="color:#B6D7A8;">æŒ‘æˆ˜è®°å¿†åŠ›æé™</span>
                    </div>
                </div>
            </div>
    
            <div style="text-align:center;">
                <button class="ins-style-btn" 
                        style="background:rgba(216, 166, 179, 0.1); color:#D8A6B3;">
                    ç¨åé€‰æ‹©
                </button>
            </div>
        </div>
    </div>
    
    <script type="module" src="js/shouye.js"></script>
    <script>
        let selectedGameMode = 'jiyiMode'; // é»˜è®¤ä¸ºè®°å¿†æ¨¡å¼
        let actionSource = ''; // è®°å½•ç”¨æˆ·ç‚¹å‡»çš„æ¥æºæŒ‰é’®
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–æ‰€æœ‰äº‹ä»¶
        document.addEventListener('DOMContentLoaded', function() {
            // æ¸¸æˆæ¨¡å¼æŒ‰é’®ç‚¹å‡»äº‹ä»¶ï¼ˆä¾§è¾¹æ ï¼‰
            document.querySelectorAll('.nav-btn').forEach(button => {
                button.addEventListener('click', function() {
                    // ç§»é™¤å…¶ä»–æŒ‰é’®çš„activeç±»
                    document.querySelectorAll('.nav-btn').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    
                    // ç»™å½“å‰æŒ‰é’®æ·»åŠ activeç±»
                    this.classList.add('active');
                    
                    // ä¿å­˜é€‰æ‹©çš„æ¸¸æˆæ¨¡å¼
                    selectedGameMode = this.getAttribute('data-action');
                    console.log('å·²é€‰æ‹©æ¸¸æˆæ¨¡å¼:', selectedGameMode);
                    
                    // æ˜¾ç¤ºä¸€ä¸ªå°æç¤º
                    const toast = document.createElement('div');
                    toast.className = 'toast-message';
                    toast.textContent = `å·²é€‰æ‹©: ${this.textContent.trim()}`;
                    toast.style.position = 'fixed';
                    toast.style.bottom = '20px';
                    toast.style.left = '50%';
                    toast.style.transform = 'translateX(-50%)';
                    toast.style.padding = '10px 20px';
                    toast.style.backgroundColor = 'rgba(0,0,0,0.7)';
                    toast.style.color = 'white';
                    toast.style.borderRadius = '5px';
                    toast.style.zIndex = '9999';
                    
                    document.body.appendChild(toast);
                    setTimeout(() => {
                        toast.style.opacity = '0';
                        toast.style.transition = 'opacity 0.5s';
                        setTimeout(() => document.body.removeChild(toast), 500);
                    }, 1500);
                });
            });
            
            // æ˜¾ç¤ºæ¸¸æˆæ¨¡å¼é€‰æ‹©æ¨¡æ€æ¡†
            function showModeSelectionModal(source) {
                actionSource = source; // è®°å½•æ¥æºæŒ‰é’®
                document.getElementById('mode-selection-modal').style.display = 'block';
                
                // é«˜äº®å½“å‰é€‰ä¸­çš„æ¨¡å¼
                document.querySelectorAll('.mode-card').forEach(card => {
                    if (card.getAttribute('data-mode') === selectedGameMode) {
                        card.style.transform = 'translateY(-5px)';
                        card.style.boxShadow = '0 10px 25px rgba(0,0,0,0.2)';
                        // æ·»åŠ å¾®å…‰æ•ˆæœ
                        card.style.border = '2px solid rgba(255,255,255,0.7)';
                    } else {
                        card.style.transform = 'none';
                        card.style.boxShadow = '0 5px 15px rgba(0,0,0,0.1)';
                        card.style.border = 'none';
                    }
                });
            }
            
            // éšè—æ¸¸æˆæ¨¡å¼é€‰æ‹©æ¨¡æ€æ¡†
            function hideModeSelectionModal() {
                document.getElementById('mode-selection-modal').style.display = 'none';
            }
            
            // å–æ¶ˆæŒ‰é’®ç‚¹å‡»äº‹ä»¶
            document.querySelector('.ins-style-btn').addEventListener('click', hideModeSelectionModal);
            
            // æ¸¸æˆæ¨¡å¼å¡ç‰‡ç‚¹å‡»äº‹ä»¶
            document.querySelectorAll('.mode-card').forEach(card => {
                card.addEventListener('click', function() {
                    selectedGameMode = this.getAttribute('data-mode');
                    console.log('å·²é€‰æ‹©æ¸¸æˆæ¨¡å¼:', selectedGameMode);
                    
                    // é«˜äº®ä¾§è¾¹æ å¯¹åº”çš„æŒ‰é’®
                    document.querySelectorAll('.nav-btn').forEach(btn => {
                        if (btn.getAttribute('data-action') === selectedGameMode) {
                            btn.classList.add('active');
                        } else {
                            btn.classList.remove('active');
                        }
                    });
                    
                    // æ ¹æ®æ¥æºæŒ‰é’®è·³è½¬åˆ°ä¸åŒé¡µé¢
                    if (actionSource === 'level') {
                        // å¼€å§‹é—¯å…³ - è·³è½¬åˆ°çº§åˆ«é€‰æ‹©é¡µé¢
                        window.location.href = `level.html?action=${selectedGameMode}`;
                    } else if (actionSource === 'random') {
                        // éšæœºæŒ‘æˆ˜ - ç›´æ¥è·³è½¬åˆ°æ¸¸æˆé¡µé¢
                        let targetUrl;
                        
                        // è®¾ç½®WordDataLoaderä¸ºéšæœºæ¨¡å¼
                        if (window.WordDataLoader) {
                            try {
                                window.WordDataLoader.setPlayMode('random', { 
                                    levelId: 'all',   // æ‰€æœ‰çº§åˆ«
                                    wordCount: 20
                                });
                                console.log('æˆåŠŸè®¾ç½®éšæœºæŒ‘æˆ˜æ¨¡å¼');
                            } catch (error) {
                                console.error('è®¾ç½®éšæœºæŒ‘æˆ˜æ¨¡å¼å¤±è´¥:', error);
                            }
                        }
                        
                        // æ ¹æ®é€‰æ‹©çš„æ¸¸æˆæ¨¡å¼ç¡®å®šè·³è½¬ç›®æ ‡
                        switch(selectedGameMode) {
                            case 'lianxianMode':
                                targetUrl = 'game_1_lianxian.html?chapter=random&mode=random';
                                break;
                            case 'pipeiMode':
                                targetUrl = 'game_2_pipei.html?chapter=random&mode=random';
                                break;
                            case 'jiyiMode':
                                targetUrl = 'game_3_jiyi.html?chapter=random&mode=random';
                                break;
                            default:
                                targetUrl = 'game_3_jiyi.html?chapter=random&mode=random';
                                break;
                        }
                        
                        window.location.href = targetUrl;
                    }
                    
                    hideModeSelectionModal();
                });
                
                // æ·»åŠ æ‚¬åœæ•ˆæœ
                card.addEventListener('mouseover', function() {
                    if (this.getAttribute('data-mode') !== selectedGameMode) {
                        this.style.transform = 'translateY(-3px)';
                        this.style.boxShadow = '0 8px 20px rgba(0,0,0,0.15)';
                    }
                });
                
                card.addEventListener('mouseout', function() {
                    if (this.getAttribute('data-mode') !== selectedGameMode) {
                        this.style.transform = 'none';
                        this.style.boxShadow = '0 5px 15px rgba(0,0,0,0.1)';
                    }
                });
                
                // å¡ç‰‡ç‚¹å‡»æ¶Ÿæ¼ªæ•ˆæœ
                card.addEventListener('click', function(e) {
                    const ripple = document.createElement('div');
                    ripple.style.cssText = `
                        position: absolute;
                        background: rgba(216,166,179,0.2);
                        border-radius: 50%;
                        transform: scale(0);
                        animation: ripple 0.6s linear;
                    `;
                    
                    const rect = card.getBoundingClientRect();
                    ripple.style.width = ripple.style.height = 
                        Math.max(rect.width, rect.height) + 'px';
                    ripple.style.left = e.clientX - rect.left - ripple.offsetWidth/2 + 'px';
                    ripple.style.top = e.clientY - rect.top - ripple.offsetHeight/2 + 'px';
                    
                    card.appendChild(ripple);
                    setTimeout(() => ripple.remove(), 600);
                });
            });
            
            // ä¿®æ”¹"å¼€å§‹é—¯å…³"æŒ‰é’®ç‚¹å‡»äº‹ä»¶
            const startLevelCard = document.querySelector('.func-card[data-type="primary"]');
            if (startLevelCard) {
                startLevelCard.onclick = function() {
                    showModeSelectionModal('level');
                };
            }
            
            // ä¿®æ”¹"éšæœºæŒ‘æˆ˜"æŒ‰é’®ç‚¹å‡»äº‹ä»¶ - ä½¿ç”¨æ¨¡æ€æ¡†é€‰æ‹©æ¸¸æˆæ¨¡å¼
            const randomChallengeCard = document.querySelector('.func-card[data-type="secondary"]:nth-child(2)');
            if (randomChallengeCard) {
                randomChallengeCard.onclick = function() {
                    // æ˜¾ç¤ºæ¨¡æ€æ¡†ï¼Œä¼ å…¥randomä½œä¸ºæ¥æº
                    showModeSelectionModal('random');
                };
            }
        });
    </script>
</body>
</html>
