<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å•è¯è®°å¿†åŒ¹é… - æ¸¸æˆç•Œé¢</title>
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/game_3.css">
    <link href="https://fonts.googleapis.com/css2?family=Handlee&display=swap" rel="stylesheet">
</head>
<body>
    <!-- æ¸¸æˆå±å¹• -->
    <div id="game-screen" class="screen">
        <!-- æ¸¸æˆèƒŒæ™¯ -->
        <div class="game-background"></div>
        
        <!-- æ¸¸æˆå¤´éƒ¨ä¿¡æ¯ -->
        <div class="game-header">
            <!-- æ¸¸æˆè¿›ç¨‹ä¿¡æ¯ -->
            <div class="game-info">  
                <div class="info-item">
                    <span class="info-label">æ—¶é—´:</span>
                    <span id="time" class="info-value">60</span>
                </div>
                <div class="info-item">
                    <span class="info-label">åˆ†æ•°:</span>
                    <span id="score" class="info-value">0</span>
                </div>
                <div class="info-item">
                    <span class="info-label">è¿å‡»:</span>
                    <span id="combo" class="info-value">0</span>
                </div>
                <div class="info-item">
                    <span class="info-label">é…å¯¹:</span>
                    <span id="matched-pairs" class="info-value">0</span>
                    <span>/</span>
                    <span id="total-pairs" class="info-value">0</span>
                </div>
            </div>

            <!-- æ¸¸æˆæ§åˆ¶æŒ‰é’® -->
            <div class="game-controls">
                <button id="hint-btn" class="control-btn hint-btn">
                    <span class="btn-icon">ğŸ”</span>
                    <span class="btn-text">æç¤º</span>
                </button>
                <button id="shuffle-btn" class="control-btn shuffle-btn">
                    <span class="btn-icon">ğŸ”„</span>
                    <span class="btn-text">æ´—ç‰Œ</span>
                </button>
                <button id="restart-btn" class="control-btn restart-btn">
                    <span class="btn-icon">ğŸ”</span>
                    <span class="btn-text">é‡å¼€</span>
                </button>
                <button id="back-btn" class="control-btn back-btn">
                    <span class="btn-icon">â¬…ï¸</span>
                    <span class="btn-text">è¿”å›</span>
                </button>
                <button id="help-btn" class="control-btn help-btn">
                    <span class="btn-icon">ğŸ†™</span>
                    <span class="btn-text">å¸®åŠ©</span>
                </button>
            </div>

            <!-- è¿›åº¦æ¡ -->
            <div class="progress-container">
                <div id="progress-fill" class="progress-fill"></div>
            </div>
        </div>

        <!-- æ¸¸æˆæ¿ -->
        <div id="game-board-container" class="game-board-container">
            <div id="game-board" class="game-board"></div>
        </div>
    </div>
    
    <!-- ç»“æœæ¨¡æ€æ¡† -->
    <div id="result-modal" class="modal">
        <div class="modal-content">
            <h2 id="result-title" class="result-title">æ¸¸æˆç»“æŸ</h2>
            <div class="result-info">
                <div class="result-item">
                    <span class="result-label">æœ€ç»ˆå¾—åˆ†:</span>
                    <span id="final-score" class="result-value">0</span>
                </div>
                <div class="result-item">
                    <span class="result-label">å‰©ä½™æ—¶é—´:</span>
                    <span id="time-left" class="result-value">0s</span>
                </div>
                <div class="result-item">
                    <span class="result-label">æœ€å¤§è¿å‡»:</span>
                    <span id="max-combo" class="result-value">0</span>
                </div>
            </div>
            <div class="star-rating">
                <span id="star1" class="star">â˜†</span>
                <span id="star2" class="star">â˜†</span>
                <span id="star3" class="star">â˜†</span>
            </div>
            <div class="result-buttons">
                <button id="play-again-btn" class="result-btn">å†ç©ä¸€æ¬¡</button>
                <button id="next-level-btn" class="result-btn">ä¸‹ä¸€å…³</button>
                <button id="menu-btn" class="result-btn">è¿”å›èœå•</button>
            </div>
        </div>
    </div>
    
    <!-- å¸®åŠ©æ¨¡æ€æ¡† -->
    <div id="help-modal" class="modal">
        <div class="modal-content">
            <h2 class="help-title">æ¸¸æˆå¸®åŠ©</h2>
            <div class="help-content">
                <p>1. ç‚¹å‡»å¡ç‰‡æŸ¥çœ‹å•è¯æˆ–å«ä¹‰</p>
                <p>2. æ‰¾åˆ°åŒ¹é…çš„å•è¯å’Œå«ä¹‰ï¼Œç‚¹å‡»ä¸¤å¼ å¡ç‰‡é…å¯¹</p>
                <p>4. åœ¨è§„å®šæ—¶é—´å†…å®Œæˆæ‰€æœ‰é…å¯¹</p>
                <p>5. è¿ç»­é…å¯¹å¯ä»¥è·å¾—è¿å‡»åŠ åˆ†</p>
                
                <h3 class="shortcuts-title">é”®ç›˜å¿«æ·é”®</h3>
                <div class="shortcuts-list">
                    <div class="shortcut-item">
                        <span class="key">T</span>
                        <span class="key-desc">ä½¿ç”¨æç¤º</span>
                    </div>
                    <div class="shortcut-item">
                        <span class="key">ç©ºæ ¼</span>
                        <span class="key-desc">æ´—ç‰Œ</span>
                    </div>
                    <div class="shortcut-item">
                        <span class="key">R</span>
                        <span class="key-desc">é‡æ–°å¼€å§‹</span>
                    </div>
                    <div class="shortcut-item">
                        <span class="key">H</span>
                        <span class="key-desc">æ˜¾ç¤ºå¸®åŠ©</span>
                    </div>
                </div>
            </div>
            <button id="close-help-btn" class="help-btn">å…³é—­</button>
        </div>
    </div>
    
    <!-- æç¤ºæ¨¡æ€æ¡† -->
    <div id="hint-modal" class="modal">
        <div class="modal-content">
            <div class="hint-card-container">
                <div id="hint-card1" class="hint-card"></div>
                <div id="hint-card2" class="hint-card"></div>
            </div>
            <button id="close-hint-btn" class="help-btn">å…³é—­</button>
        </div>
    </div>
    
    <!-- è„šæœ¬å¼•å…¥ -->
    <!-- å‚æ•°è§£æè„šæœ¬ -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // è§£æURLå‚æ•°
            const urlParams = new URLSearchParams(window.location.search);
            const chapterId = urlParams.get('chapter');        // åŸå§‹ç« èŠ‚ID
            const categoryId = urlParams.get('category');      // çº§åˆ«ID
            const categoryName = urlParams.get('categoryName');// çº§åˆ«åç§°
            const chapterName = urlParams.get('chapterName');  // ç« èŠ‚åç§°
            
            // åœ¨æ§åˆ¶å°æ˜¾ç¤ºæ‰€æœ‰å‚æ•°
            console.log('================ æ¸¸æˆå‚æ•° ================');
            console.log(`çº§åˆ«ID: ${categoryId || 'æœªè·å–'}`);
            console.log(`çº§åˆ«åç§°: ${categoryName || 'æœªè·å–'}`);
            console.log(`ç« èŠ‚ID: ${chapterId || 'æœªè·å–'}`);
            console.log(`ç« èŠ‚åç§°: ${chapterName || 'æœªè·å–'}`);
            console.log('=========================================');
            
            // åœ¨é¡µé¢ä¸Šæ˜¾ç¤ºå‚æ•°ï¼ˆä»…ç”¨äºæµ‹è¯•ï¼‰
            const gameHeader = document.querySelector('.game-header');
            if (gameHeader) {
                const debugInfo = document.createElement('div');
                debugInfo.style.position = 'absolute';
                debugInfo.style.top = '10px';
                debugInfo.style.right = '10px';
                debugInfo.style.background = 'rgba(0,0,0,0.7)';
                debugInfo.style.color = 'white';
                debugInfo.style.padding = '5px 10px';
                debugInfo.style.borderRadius = '5px';
                debugInfo.style.fontSize = '12px';
                debugInfo.style.fontFamily = 'monospace';
                debugInfo.style.zIndex = '1000';
                debugInfo.innerHTML = `
                    <div style="margin-bottom:3px;font-weight:bold;text-decoration:underline;">æ¸¸æˆå‚æ•°</div>
                    <div>çº§åˆ«ID: ${categoryId || 'æœªè·å–'}</div>
                    <div>çº§åˆ«åç§°: ${categoryName || 'æœªè·å–'}</div>
                    <div>ç« èŠ‚ID: ${chapterId || 'æœªè·å–'}</div>
                    <div>ç« èŠ‚åç§°: ${chapterName || 'æœªè·å–'}</div>
                `;
                gameHeader.appendChild(debugInfo);
            }
            
            // æ›´æ–°é¡µé¢æ ‡é¢˜ï¼ˆå¦‚æœæœ‰ç« èŠ‚å’Œçº§åˆ«åç§°ï¼‰
            if (categoryName && chapterName) {
                document.title = `${categoryName} - ${chapterName} | å•è¯è®°å¿†åŒ¹é…`;
            }
        });
    </script>
    
    <!-- åŸºç¡€å·¥å…·å’Œé…ç½® -->
    <script type="module" src="js/utils.js"></script>
    <script type="module" src="js/config.js"></script>
    <script type="module" src="js/store.js"></script>
    
    <!-- æ•°æ®åŠ è½½å™¨ - åœ¨æ¸¸æˆé€»è¾‘ä¹‹å‰åŠ è½½ -->
    <script src="js/data-loader.js"></script>
    
    <!-- éŸ³æ•ˆç®¡ç†å™¨ -->
    <script type="module" src="js/sound-manager.js"></script>
    
    <!-- æ¸¸æˆä¸»é€»è¾‘ -->
    <script src="js/game_3_jiyi.js"></script>

    
</body>
</html>
